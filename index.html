<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="css/style.css">
    <title>Game</title>
</head>
<body>
    <div class="wrapper" id="main_page">
        <div class="main-head">
			<div class="user">
				<div class="photo">
					<img src="content/pixel.gif" alt="" />
				</div>
				<div class="user-info">
					<div>Phantomas</div>
					<span>5 LVL</span>
				</div>
			</div>
			<div class="user-rank">
				YOUR RANK
				<span>#245 522</span>
			</div>
		</div>
		
		<div class="page full-page">
			<div class="invite closing-div slide-up">
				<div class="close"></div>
				Invite your friends<br /> and get rewards
				<div class="more">learn more ➞</div>
			</div>
			<div class="bottom-block">
				<div class="item-coin">0</div>
				<div class="farm-block">
					100 nuts farming per hour
					<div class="boost open-level">BOOST</div>
				</div>
				<div class="mining-btn">Start mining</div>
				<div class="claim-btn">Claim tokens<div class="count">124</div></div>
				<div class="claim-btn"><div class="countdown">Left <div id="countdown"></div></div><div class="count">4658</div></div>
			</div>
		</div>
		
		
		
		
		
		
		
		<div class="bottom-fixed-menu">
			<div class="menu home active">
				<div class="icon">
					<svg width="13" height="16" viewBox="0 0 13 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
						<path class="icon-color" d="M7.99671 1.44676C7.17803 0.601244 5.822 0.601243 5.00332 1.44676L1.00459 5.57653C0.774935 5.81371 0.620614 6.11356 0.561067 6.43828C0.0754341 9.08659 0.0395868 11.7978 0.455031 14.458L0.602117 15.3999C0.648575 15.6973 0.904794 15.9167 1.20588 15.9167H4.00002C4.23013 15.9167 4.41668 15.7301 4.41668 15.5V9.66666H8.58335V15.5C8.58335 15.7301 8.7699 15.9167 9.00002 15.9167H11.7941C12.0952 15.9167 12.3514 15.6974 12.3979 15.3999L12.545 14.458C12.9604 11.7978 12.9246 9.08659 12.4389 6.43828C12.3794 6.11356 12.2251 5.81371 11.9954 5.57654L7.99671 1.44676Z"></path>
					</svg>
				</div>
				Home
			</div>
			<div class="menu earn">
				<div class="icon">
					<svg width="17" height="16" viewBox="0 0 17 16" xmlns="http://www.w3.org/2000/svg">
						<path class="icon-color" d="M16.5085 6.47608L16.5106 9.49513C16.4894 9.78275 16.462 10.07 16.4284 10.3568C16.3724 10.8363 15.9826 11.2231 15.4931 11.2778C13.9599 11.4491 12.3734 11.4491 10.8403 11.2778C10.3508 11.2231 9.96099 10.8363 9.90491 10.3568C9.72177 8.79094 9.72177 7.20908 9.90491 5.64324C9.96099 5.16374 10.3508 4.77695 10.8403 4.72224C12.3734 4.55089 13.9599 4.55089 15.4931 4.72224C15.9826 4.77695 16.3724 5.16374 16.4284 5.64324C16.4609 5.92041 16.4875 6.19808 16.5085 6.47608ZM13.1667 6.75001C12.4763 6.75001 11.9167 7.30965 11.9167 8.00001C11.9167 8.69036 12.4763 9.25001 13.1667 9.25001C13.857 9.25001 14.4167 8.69036 14.4167 8.00001C14.4167 7.30965 13.857 6.75001 13.1667 6.75001Z"></path>
						<path class="icon-color" d="M16.003 3.03311C16.1326 3.25749 15.8894 3.50876 15.6319 3.47998C14.0065 3.29831 12.3268 3.29831 10.7014 3.47998C9.64365 3.5982 8.78816 4.43115 8.66338 5.49803C8.46895 7.16035 8.46895 8.83967 8.66338 10.502C8.78816 11.5689 9.64365 12.4018 10.7014 12.52C12.3268 12.7017 14.0065 12.7017 15.6319 12.52C15.8911 12.4911 16.1363 12.7441 16.0055 12.9697C15.3566 14.0887 14.1999 14.8697 12.8557 15.0112L12.3125 15.0683C9.55342 15.3587 6.77055 15.3395 4.01576 15.0113L3.65581 14.9684C2.17071 14.7914 0.993999 13.6311 0.796189 12.1486C0.428777 9.39509 0.428777 6.60494 0.796189 3.85139C0.993999 2.36891 2.17071 1.20862 3.65581 1.03165L4.01576 0.988755C6.77055 0.660483 9.55342 0.641338 12.3125 0.931674L12.8557 0.988838C14.201 1.13041 15.3559 1.91258 16.003 3.03311Z"></path>></path>
					</svg>
				</div>
				Earn
			</div>
			<div class="menu game">
				<div class="icon">
					<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path class="icon-color" clip-rule="evenodd" d="M8.00001 0.875C8.34519 0.875 8.62501 1.15482 8.62501 1.5V2.94742C9.81785 2.96379 11.0102 3.02705 12.1993 3.1372L12.4757 3.1628C14.3629 3.33762 15.8162 4.90483 15.8483 6.79991L15.8584 7.39446C15.8976 9.70683 15.7112 12.0175 15.3018 14.2937C15.1156 15.3296 14.2141 16.0833 13.1616 16.0833H12.9774C12.0304 16.0833 11.1722 15.5252 10.7883 14.6595L9.90444 12.6667C9.17193 11.0152 6.8281 11.0152 6.09559 12.6667L5.21176 14.6595C4.82778 15.5252 3.96967 16.0833 3.02259 16.0833H2.83838C1.78588 16.0833 0.884462 15.3296 0.698176 14.2937C0.288846 12.0175 0.102453 9.70683 0.141644 7.39447L0.15172 6.79992C0.183839 4.90483 1.6371 3.33762 3.52437 3.1628L3.80071 3.1372C4.98981 3.02705 6.18217 2.96379 7.37501 2.94742V1.5C7.37501 1.15482 7.65483 0.875 8.00001 0.875ZM12.1667 5.66667C12.1667 5.20643 11.7936 4.83333 11.3333 4.83333C10.8731 4.83333 10.5 5.20643 10.5 5.66667V5.875C10.5 6.33524 10.8731 6.70833 11.3333 6.70833C11.7936 6.70833 12.1667 6.33524 12.1667 5.875V5.66667ZM4.66668 5.04167C5.01186 5.04167 5.29168 5.32149 5.29168 5.66667V6.70833H6.33335C6.67852 6.70833 6.95835 6.98816 6.95835 7.33333C6.95835 7.67851 6.67852 7.95833 6.33335 7.95833H5.29168V9C5.29168 9.34518 5.01186 9.625 4.66668 9.625C4.3215 9.625 4.04168 9.34518 4.04168 9V7.95833H3.00001C2.65483 7.95833 2.37501 7.67851 2.37501 7.33333C2.37501 6.98816 2.65483 6.70833 3.00001 6.70833L4.04168 6.70833V5.66667C4.04168 5.32149 4.3215 5.04167 4.66668 5.04167ZM11.3333 7.95833C11.7936 7.95833 12.1667 8.33143 12.1667 8.79167V9C12.1667 9.46024 11.7936 9.83333 11.3333 9.83333C10.8731 9.83333 10.5 9.46024 10.5 9V8.79167C10.5 8.33143 10.8731 7.95833 11.3333 7.95833ZM13 8.16667C13.4602 8.16667 13.8333 7.79357 13.8333 7.33333C13.8333 6.8731 13.4602 6.5 13 6.5H12.7917C12.3314 6.5 11.9583 6.8731 11.9583 7.33333C11.9583 7.79357 12.3314 8.16667 12.7917 8.16667H13ZM10.7083 7.33333C10.7083 7.79357 10.3352 8.16667 9.87501 8.16667H9.66668C9.20644 8.16667 8.83335 7.79357 8.83335 7.33333C8.83335 6.8731 9.20644 6.5 9.66668 6.5H9.87501C10.3352 6.5 10.7083 6.8731 10.7083 7.33333Z"></path>
					</svg>
				</div>
				Games
			</div>
			<div class="menu profile">
				<div class="icon">
					<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path class="icon-color" d="M7.00001 0.125C5.27412 0.125 3.87501 1.52411 3.87501 3.25C3.87501 4.97589 5.27412 6.375 7.00001 6.375C8.7259 6.375 10.125 4.97589 10.125 3.25C10.125 1.52411 8.7259 0.125 7.00001 0.125Z"></path>
						<path class="icon-color" d="M3.66667 8.04167C1.94078 8.04167 0.541672 9.44078 0.541672 11.1667V12.1569C0.541672 12.7846 0.996575 13.3198 1.61606 13.4209C5.18175 14.0031 8.81826 14.0031 12.3839 13.4209C13.0034 13.3198 13.4583 12.7846 13.4583 12.1569V11.1667C13.4583 9.44078 12.0592 8.04167 10.3333 8.04167H10.0493C9.89554 8.04167 9.74276 8.06598 9.59661 8.1137L8.87535 8.34921C7.65678 8.74712 6.34323 8.74712 5.12466 8.34921L4.4034 8.1137C4.25725 8.06598 4.10447 8.04167 3.95073 8.04167H3.66667Z"></path>
					</svg>
				</div>
				Profile
			</div>
			<div class="menu rating">
				<div class="icon">
					<svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path class="icon-color" class="icon" d="M9.72077 0.496882C9.39962 -0.0565768 8.60037 -0.056579 8.27922 0.496882L6.01751 4.39464C5.85886 4.66804 5.58465 4.85462 5.2721 4.90183L1.03351 5.54201C0.321606 5.64954 0.0718892 6.54838 0.62631 7.00771L3.78389 9.62373C4.07617 9.86589 4.2136 10.2479 4.1426 10.6207L3.31663 14.9583C3.18606 15.644 3.90588 16.1768 4.52351 15.8516L8.51468 13.7501C8.81846 13.5901 9.18154 13.5901 9.48531 13.7501L13.4765 15.8516C14.0941 16.1768 14.8139 15.644 14.6834 14.9583L13.8574 10.6207C13.7864 10.2479 13.9238 9.86589 14.2161 9.62373L17.3737 7.00771C17.9281 6.54838 17.6784 5.64954 16.9665 5.54201L12.7279 4.90183C12.4153 4.85462 12.1411 4.66804 11.9825 4.39464L9.72077 0.496882Z"></path>
					</svg>
				</div>
				Rating
			</div>
		</div>
   

		<div class="bottom-hidden-block level-block closing-div slide-down">
			<div class="close"></div>
			<div class="container">
				
				<div class="block-name">Levels</div>
				<p>Upgrade your level to collect<br /> tokens less frequently</p>
				<div class="level-list-block scrollable-element">
					<div class="list">
						<div class="item">10 nuts per hour · 2 hours</div>
						<div class="level">1 lvl</div>
					</div>
					<div class="list">
						<div class="item">20 nuts per hour · 2 hours </div>
						<div class="level">2 lvl</div>
					</div>
					<div class="list">
						<div class="item">30 nuts per hour · 2 hours </div>
						<div class="level">3 lvl</div>
					</div>
					<div class="list">
						<div class="item">40 nuts per hour · 2 hours </div>
						<div class="level">4 lvl</div>
					</div>
					<div class="list you">
						<div class="item">50 nuts per hour · 2 hours </div>
						<div class="you">YOU →</div>
						<div class="level">5 lvl</div>
					</div>
					<div class="list">
						<div class="item">60 nuts per hour · 2 hours </div>
						<div class="level">6 lvl</div>
					</div>
					<div class="list">
						<div class="item">70 nuts per hour · 2 hours </div>
						<div class="level">7 lvl</div>
					</div>
					<div class="list">
						<div class="item">80 nuts per hour · 2 hours </div>
						<div class="level">8 lvl</div>
					</div>
					<div class="list">
						<div class="item">90 nuts per hour · 2 hours </div>
						<div class="level">9 lvl</div>
					</div>
					<div class="list">
						<div class="item">100 nuts per hour · 2 hours </div>
						<div class="level">10 lvl</div>
					</div>
				</div>
				
			</div>
		</div>
		<div class="overflow"></div>
	</div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
	 <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script>
	let tg = window.Telegram.WebApp; //получаем объект webapp телеграма
	

let main_page = document.querySelector('#main_page');
$(window).resize(function() {
    $('.page.full-page').css({minHeight:$(window).height() - 161})
});

$(window).trigger('resize');

if  (main_page){
    window.Telegram.WebApp.expand() //expand window after page loading
	window.Telegram.WebApp.disableVerticalSwipes()
}







var isOutOfViewport = function (elem) {
  // Get element's bounding
  var bounding = elem.getBoundingClientRect()

  // Check if it's out of the viewport on each side
  var out = {}
  out.top = bounding.top < 0
  out.left = bounding.left < 0
  out.bottom =
    bounding.bottom >
    (window.innerHeight-50 || document.documentElement.clientHeight)
  out.right =
    bounding.right > (window.innerWidth || document.documentElement.clientWidth)
  out.any = out.top || out.left || out.bottom || out.right

  return out
}

var elem = document.querySelector(".page")

var logViewport = function () {
  var isOut = isOutOfViewport(elem)
  if (isOut.any) {
    console.log("Not in the viewport! =(")
	$('body').removeClass('scroll');
  } else {
    console.log("In the viewport! =)")
	$('body').addClass('scroll');
  }
}

logViewport()
window.addEventListener("scroll", logViewport, false)
$(window).resize(function() {
logViewport()
});
window.addEventListener("orientationchange", function() {
  // Announce the new orientation number
  logViewport()
}, false);











      /*function ensureDocumentIsScrollable() {
        const isScrollable =
          document.documentElement.scrollHeight > window.innerHeight;
        if (!isScrollable) {
          document.documentElement.style.setProperty(
            "height",
            "calc(100vh + 1px)",
            "important"
          );
        }
      }
      function preventCollapse() {
        if (window.scrollY === 0) {
          window.scrollTo(0, 1);
        }
      }

      const scrollableElement = document.querySelector(".scrollable-element");
      scrollableElement.addEventListener("touchstart", preventCollapse);

      window.addEventListener("load", ensureDocumentIsScrollable);*/
	$(".close").click(function() {
		$(this).parent('.closing-div').toggleClass('hide');
		$('.overflow').removeClass('show');
		$('body').removeClass('hide');
	});
	$(".overflow").click(function() {
		$('.overflow').removeClass('show');
		$('body').removeClass('hide');
		$('.bottom-hidden-block.level-block').removeClass('hide');
	});
	$(".open-level").click(function() {
		$('body').toggleClass('hide');
		$('.overflow').toggleClass('show');
		$('.bottom-hidden-block.level-block').toggleClass('hide');
	});






$(function () {
	jQuery.fn.extend({
    	countdown: function () {
            let hour = 3, min = 0, sec = 0
            render(hour, min, sec)
            
            const timer = setInterval(() => {
            	if (hour == 0 && min == 0 && sec == 0) {
                	clearInterval(timer)
                    return ;
                }
                
            	sec = dealSec(sec)
                min = dealMin(min, sec)
                hour = dealhour(hour, min, sec)
                render(hour, min, sec)
            }, 1000)
        },
    })
    
    $('#countdown').countdown()
})

function dealSec (sec) {
    const timeRange = [...Array(60).keys()].reverse()
	const idxNow = timeRange.indexOf(sec)
    const idxNext = (idxNow + 1) % timeRange.length
    return timeRange[idxNext]
}

function dealMin(min, sec) {
    const timeRange = [...Array(60).keys()].reverse()
    if (sec === 59) {
    	const idxNow = timeRange.indexOf(min)
        const idxNext = (idxNow + 1) % timeRange.length
        return timeRange[idxNext]
    }
    return min
}

function dealhour (hour, min, sec) {
	if (min === 59 && sec === 59) return hour - 1
    return hour
}

function render(hour, min, sec) {
	hour = ("00" + hour).slice(-2)
    min  = ("00" + min).slice(-2)
    sec  = ("00" + sec).slice(-2)
    
    $('#countdown').text(`${hour} : ${min} : ${sec}`)
}
</script>
</body>
</html>